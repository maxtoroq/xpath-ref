<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>fn:max</title><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" /><link rel="stylesheet" href="../../css/site.css" /></head><body><div class="container"><ol class="breadcrumb"><li><a href="../../">XPath Reference</a></li><li class="active">fn:max</li></ol><h1 class="page-header">fn:max</h1><p>Returns a value that is equal to the highest value appearing in the input
            sequence.</p><h2>Signatures</h2><p><pre><code class="signature"><span class="function">fn:max</span><span class="parenthesis">(</span><span class="variable">$arg</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:anyAtomicType*</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:anyAtomicType</span><span class="quantifier">?</span></code></pre><pre><code class="signature"><span class="function">fn:max</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$arg</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:anyAtomicType*</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$collation</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:anyAtomicType</span><span class="quantifier">?</span></code></pre></p><h2>Properties</h2><p>The zero-argument form of this function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-dependent">context-dependent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>.  It depends on 
		collations, and implicit timezone.
	</p><p>The one-argument form of this function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-dependent">context-dependent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>.  It depends on 
		collations, and static base uri, and implicit timezone.
	</p><h2>Rules</h2><p>The following rules are applied to the input sequence <code>$arg</code>:</p><ul><li><p>Values of type <code>xs:untypedAtomic</code> in <code>$arg</code> are cast to
                     <code>xs:double</code>.</p></li><li><p>Numeric and <code>xs:anyURI</code> values are converted to
                  the least common type reachable by a combination of type promotion and subtype
                  substitution. See <a href="http://www.w3.org/TR/xpath-30/#promotion">Type Promotion</a> and <a href="http://www.w3.org/TR/xpath-30/#mapping">Operator Mapping</a>.</p></li></ul><p>The items in the resulting sequence may be reordered in an arbitrary order. The
            resulting sequence is referred to below as the converted sequence. The function returns
            an item from the converted sequence rather than the input sequence. </p><p>If the converted sequence is empty, the function returns the empty sequence.</p><p>All items in the converted sequence must be
               derived from a single base type for which the <code>le</code> operator is
            defined. In addition, the values in the sequence must have a total order. If date/time
            values do not have a timezone, they are considered to have the implicit timezone
            provided by the dynamic context for the purpose of comparison. Duration values must
            either all be <code>xs:yearMonthDuration</code> values or must all be
               <code>xs:dayTimeDuration</code> values.</p><p>If the converted sequence contains the value <code>NaN</code>, the value
               <code>NaN</code> is returned.</p><p>If the items in the converted sequence are of
            type <code>xs:string</code> or types derived by restriction from <code>xs:string</code>,
            then the determination of the item with the smallest value is made according to the
            collation that is used. If the type of the items in the converted sequence is not <code>xs:string</code> and
               <code>$collation</code> is specified, the collation is ignored.</p><p>The collation used by this function is determined according to the rules in <a href="http://www.w3.org/TR/xpath-functions-30/#choosing-a-collation">Choosing a collation</a>.</p><p>The function returns the result of the expression:</p><pre><code><span class="whitespace">   </span><span class="if">if</span><span class="whitespace"> </span><span class="parenthesis">(</span><span class="higher">every</span><span class="whitespace"> </span><span class="variable">$v</span><span class="whitespace"> </span><span class="op">in</span><span class="whitespace"> </span><span class="variable">$c</span><span class="whitespace"> </span><span class="op">satisfies</span><span class="whitespace"> </span><span class="variable">$c</span><span class="filter">[</span><span class="numeric">1</span><span class="filter">]</span><span class="whitespace"> </span><span class="op">ge</span><span class="whitespace"> </span><span class="variable">$v</span><span class="parenthesis">)</span><span class="whitespace">
   </span><span class="op">then</span><span class="whitespace"> </span><span class="variable">$c</span><span class="filter">[</span><span class="numeric">1</span><span class="filter">]</span><span class="whitespace"> 
   </span><span class="op">else</span><span class="whitespace"> </span><span class="function">fn:max</span><span class="parenthesis">(</span><span class="function">fn:subsequence</span><span class="parenthesis">(</span><span class="variable">$c</span><span class="op">,</span><span class="whitespace"> </span><span class="numeric">2</span><span class="parenthesis">)</span><span class="parenthesis">)</span></code></pre><p>evaluated with <code>$collation</code> as the default collation if specified, and with
               <code>$c</code> as the converted sequence.</p><h2>Error Conditions</h2><p>A type error is raised [<a href="http://www.w3.org/TR/xpath-functions-30/#ERRFORG0006">ERRFORG0006</a>] if the input sequence contains
            items of incompatible types, as described above.</p><h2>Notes</h2><p>Because the rules allow the sequence to be reordered, if there are two or items that are
            "equal highest", the specific item whose value is returned is <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-dependent">implementation dependent</a>. This can arise for example if two different strings
            compare equal under the selected collation, or if two different <code>xs:dateTime</code>
            values compare equal despite being in different timezones.</p><p>If the converted sequence contains exactly one value then that value is returned.</p><p>The default type when the <code>fn:max</code> function is applied to
               <code>xs:untypedAtomic</code> values is <code>xs:double</code>. This differs from the
            default type for operators such as <code>gt</code>, and for sorting in XQuery and XSLT,
            which is <code>xs:string</code>.</p><h2>Examples</h2><p>The expression <code>fn:max((3,4,5))</code> returns <code>5</code>.</p><p>The expression <code>fn:max((xs:integer(5), xs:float(5.0), xs:double(0)))</code> returns <code>xs:double(5.0e0)</code>.</p><p><code>fn:max((3,4,"Zero"))</code> raises a type error [<a href="http://www.w3.org/TR/xpath-functions-30/#ERRFORG0006">ERRFORG0006</a>]. </p><p>The expression <code>fn:max((fn:current-date(), xs:date("2100-01-01")))</code> returns <code>xs:date("2100-01-01")</code>. (Assuming that the current date is during the 21st
                  century.).</p><p>The expression <code>fn:max(("a", "b", "c"))</code> returns <code>"c"</code>. (Assuming a typical default collation.).</p><section><h2>See Also</h2><ul><li><a href="http://www.w3.org/TR/xpath-functions-30/#func-max">XPath and XQuery Functions and Operators 3.0</a></li><li><a href="http://www.saxonica.com/documentation/html/functions/fn/max.html">Saxon Function Library</a></li></ul></section></div><footer><div class="container"><small class="copyright">Portions of this document were copied from <a href="http://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/xpath-functions-30.xml">XPath and XQuery Functions and Operators 3.0</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2014&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div></footer></body></html>