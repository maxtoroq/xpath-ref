<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" itemscope="itemscope" itemtype="http://schema.org/WebPage"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><title>fn:fold-left</title><link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.min.css" /><link rel="stylesheet" href="../css/site.css" /><link rel="shortcut icon" href="../favicon.ico" /></head><body><header role="navigation"><nav class="container"><ol class="breadcrumb" itemprop="breadcrumb"><li><a href="../">XPath Reference</a></li><li class="active">fn:fold-left</li></ol></nav></header><article class="container" itemscope="itemscope" itemtype="http://schema.org/WebPageElement" itemprop="mainContentOfPage"><header><h1 class="page-header">fn:fold-left</h1></header><p>Processes the supplied sequence from left to right, applying the supplied
            function repeatedly to each item in turn, together with an accumulated result value.</p><section><header><h2>Signature</h2></header><p><pre><code class="signature"><span class="function">fn:fold-left</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$seq</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$zero</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$f</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">function</span><span class="parenthesis">(</span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span></code></pre></p></section><section><header><h2>Properties</h2></header><p>This function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-independent">context-independent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>. </p></section><section><header><h2>Rules</h2></header><p>The effect of the function is equivalent to the following implementation in XQuery:</p><pre><code><span class="open"></span><span class="whitespace">declare function</span><span class="whitespace"> </span><span class="function">fn:fold-left</span><span class="parenthesis">(</span><span class="whitespace">
        </span><span class="variable">$seq</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="whitespace">
        </span><span class="variable">$zero</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace">
        </span><span class="variable">$f</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">function</span><span class="parenthesis">(</span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="parenthesis">)</span><span class="whitespace"> 
        </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="whitespace"> </span><span class="op">{</span><span class="whitespace">
  </span><span class="if">if</span><span class="whitespace"> </span><span class="parenthesis">(</span><span class="function">fn:empty</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace">
  </span><span class="op">then</span><span class="whitespace"> </span><span class="variable">$zero</span><span class="whitespace">
  </span><span class="op">else</span><span class="whitespace"> </span><span class="function">fn:fold-left</span><span class="parenthesis">(</span><span class="function">fn:tail</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace"> </span><span class="function">$f</span><span class="parenthesis">(</span><span class="variable">$zero</span><span class="op">,</span><span class="whitespace"> </span><span class="function">fn:head</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace"> </span><span class="variable">$f</span><span class="parenthesis">)</span><span class="whitespace">
</span><span class="op">}</span><span class="op">;</span></code></pre><p>or its equivalent in XSLT:</p><pre><code><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname">fn:fold-left</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">item()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">seq</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">item()*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">zero</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">item()*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">f</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">function(item()*, item()) as item()*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="function">fn:empty</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable">$zero</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span class="ec">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function">fn:fold-left</span><span class="parenthesis">(</span><span class="function">fn:tail</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace"> </span><span class="function">$f</span><span class="parenthesis">(</span><span class="variable">$zero</span><span class="op">,</span><span class="whitespace"> </span><span class="function">fn:head</span><span class="parenthesis">(</span><span class="variable">$seq</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace"> </span><span class="variable">$f</span><span class="parenthesis">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span class="ec">&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span class="ec">&gt;</span><span class="txt">
         </span></code></pre></section><section><header><h2>Error Conditions</h2></header><p>As a consequence of the function signature and the function calling
            rules, a type error occurs if the supplied function <i>$f</i> cannot be applied to
            two arguments, where the first argument is either the value of <i>$zero</i> or the
            result of a previous application of <i>$f</i>, and the second is <i>$seq</i> or
            any trailing subsequence of <i>$seq</i>.</p></section><section><header><h2>Notes</h2></header><p>This operation is often referred to in the functional programming literature as
            "folding" or "reducing" a sequence. It takes a function that operates on a pair of
            values, and applies it repeatedly, with an accumulated result as the first argument, and
            the next item in the sequence as the second argument. The accumulated result is
            initially set to the value of the <i>$zero</i> argument, which is conventionally a
            value (such as zero in the case of addition, one in the case of multiplication, or a
            zero-length string in the case of string concatenation) that causes the function to
            return the value of the other argument unchanged.</p></section><section><header><h2>Examples</h2></header><p>The expression <code>fn:fold-left(1 to 5, 0, function($a, $b) { $a + $b })</code> returns <code>15</code>. (This returns the sum of the items in the sequence).</p><p>The expression <code>fn:fold-left((2,3,5,7), 1, function($a, $b) { $a * $b })</code> returns <code>210</code>. (This returns the product of the items in the sequence).</p><p>The expression <code>fn:fold-left((true(), false(), false()), false(), function($a, $b) { $a or $b })</code> returns <code>true()</code>. (This returns true if any item in the sequence has an effective boolean
                  value of true).</p><p>The expression <code>fn:fold-left((true(), false(), false()), false(), function($a, $b) { $a and $b })</code> returns <code>false()</code>. (This returns true only if every item in the sequence has an effective
                  boolean value of true).</p><p>The expression <code>fn:fold-left(1 to 5, (), function($a, $b) {($b, $a)})</code> returns <code>(5,4,3,2,1)</code>. (This reverses the order of the items in a sequence).</p><p>The expression <code>fn:fold-left(1 to 5, "", fn:concat(?, ".", ?))</code> returns <code>".1.2.3.4.5"</code>.</p><p>The expression <code>fn:fold-left(1 to 5, "$zero", fn:concat("$f(", ?, ", ", ?, ")")</code> returns <code>"$f($f($f($f($f($zero, 1), 2), 3), 4), 5)"</code>.</p></section><footer><h2>See Also</h2><ul><li><a href="http://www.w3.org/TR/xpath-functions-30/#func-fold-left">XPath and XQuery Functions and Operators 3.0</a></li><li><a href="http://www.saxonica.com/documentation/html/functions/fn/fold-left.html">Saxon Function Library</a></li></ul></footer></article><footer><div class="container"><small class="copyright">Portions of this document were copied from <a href="http://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/xpath-functions-30.xml">XPath and XQuery Functions and Operators 3.0</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2014&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div></footer></body></html>