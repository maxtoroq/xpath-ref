<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" itemscope="itemscope" itemtype="http://schema.org/WebPage">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="viewport" content="width=device-width,initial-scale=1.0" />
      <title>fn:format-number</title>
      <link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.min.css" />
      <link rel="stylesheet" href="../css/site.css" />
      <link rel="shortcut icon" href="../favicon.ico" />
   </head>
   <body>
      <header role="navigation">
         <nav class="container">
            <div class="col-md-9 breadcrumb-col">
               <ol class="breadcrumb" itemprop="breadcrumb">
                  <li><a href="../">XPath Reference</a></li>
                  <li class="active">fn:format-number</li>
               </ol>
            </div>
            <div class="col-md-3 search-col">
               <form method="get" action="https://cse.google.com/cse"><input type="hidden" name="cx" value="012329136009221431645:sv1eakamyny" /><div class="input-group"><input type="search" name="q" class="form-control" placeholder="Search" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button></span></div>
               </form>
            </div>
         </nav>
      </header>
      <article class="container" itemscope="itemscope" itemtype="http://schema.org/WebPageElement" itemprop="mainContentOfPage">
         <header>
            <h1 class="page-header">fn:format-number</h1>
         </header>
         <p>Returns a string containing a number formatted according to a given picture string,
            taking account of decimal formats specified in the static context.
         </p>
         <section>
            <header>
               <h2>Signatures</h2>
            </header><pre><code class="signature"><span class="function">fn:format-number</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$value</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:numeric</span><span class="quantifier">?</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$picture</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre><pre><code class="signature"><span class="function">fn:format-number</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$value</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:numeric</span><span class="quantifier">?</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$picture</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$decimal-format-name</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="quantifier">?</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre></section>
         <section>
            <header>
               <h2>Properties</h2>
            </header>
            <p>The two-argument form of this function is <a href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic">deterministic</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent">context-independent</a>,  and <a href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent">focus-independent</a>. 
            </p>
            <p>The three-argument form of this function is <a href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic">deterministic</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent">context-dependent</a>,  and <a href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent">focus-independent</a>.  It depends on 
               		decimal formats, and namespaces.
               	
            </p>
         </section>
         <section>
            <header>
               <h2>Rules</h2>
            </header>
            <p>The effect of the two-argument form of the function is equivalent to calling the
               three-argument form with an empty sequence as the value of the third argument.
            </p>
            <p>The function formats <code>$value</code> as a string using the <a href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string">picture string</a> specified by the
               <code>$picture</code> argument and the decimal-format named by the
               <code>$decimal-format-name</code> argument, or the unnamed decimal-format, if there
               is no <code>$decimal-format-name</code> argument. The syntax of the picture string is
               described in <a href="https://www.w3.org/TR/xpath-functions-31/#syntax-of-picture-string">Syntax of the picture string</a>.
            </p>
            <p>The <code>$value</code> argument may be of any numeric data type
               (<code>xs:double</code>, <code>xs:float</code>, <code>xs:decimal</code>, or their
               subtypes including <code>xs:integer</code>). Note that if an <code>xs:decimal</code> is
               supplied, it is not automatically promoted to an <code>xs:double</code>, as such
               promotion can involve a loss of precision.
            </p>
            <p>If the supplied value of the <code>$value</code> argument is an empty sequence, the
               function behaves as if the supplied value were the <code>xs:double</code> value
               <code>NaN</code>.
            </p>
            <p>The value of <code>$decimal-format-name</code>, if present and non-empty,
               <b>must</b> be a string which after removal of leading and trailing
               whitespace is in the form of an <code>EQName</code> as defined in the XPath 3.0
               grammar, that is one of the following:
            </p>
            <ul>
               <li>
                  <p>A lexical QName, which is expanded using the statically known namespaces. The
                     default namespace is not used (no prefix means no namespace).
                  </p>
               </li>
               <li>
                  <p>A <code>URIQualifiedName</code> using the syntax <code>Q{uri}local</code>, where
                     the URI can be zero-length to indicate a name in no namespace.
                  </p>
               </li>
            </ul>
            <p>The decimal format that is used is the decimal format in the static context whose
               name
               matches <code>$decimal-format-name</code> if supplied, or the unnamed decimal format in
               the static context otherwise.
            </p>
            <p>The evaluation of the <code>fn:format-number</code> function takes place in two
               phases, an analysis phase described in <a href="https://www.w3.org/TR/xpath-functions-31/#analyzing-picture-string">Analyzing the picture string</a> and a
               formatting phase described in <a href="https://www.w3.org/TR/xpath-functions-31/#formatting-the-number">Formatting the number</a>.
            </p>
            <p>The analysis phase takes as its inputs the <a href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string">picture
                  string</a> and the variables derived from the relevant decimal format in the
               static context, and produces as its output a number of variables with defined values.
               The formatting phase takes as its inputs the number to be formatted and the variables
               produced by the analysis phase, and produces as its output a string containing a
               formatted representation of the number.
            </p>
            <p>The result of the function is the formatted string representation of the supplied
               number.
            </p>
         </section>
         <section>
            <header>
               <h2>Error Conditions</h2>
            </header>
            <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODF1280">ERRFODF1280</a>] if the name specified as
               the <code>$decimal-format-name</code> argument is neither a valid lexical QName nor a
               valid <code>URIQualifiedName</code>, or if it uses a prefix that is not found in the
               statically known namespaces, or if the static context does not contain a declaration
               of
               a decimal-format with a matching expanded QName. If the processor is able to detect
               the
               error statically (for example, when the argument is supplied as a string literal),
               then
               the processor <b>may</b> optionally signal this as a static error.
            </p>
         </section>
         <section>
            <header>
               <h2>Notes</h2>
            </header>
            <p>A string is an ordered sequence of characters, and this specification 
               uses terms such as "left" and "right", "preceding" and "following" in relation to
               this ordering, 
               irrespective of the position of the characters when visually rendered on some output
               medium. 
               Both in the picture string and in the result string, digits with higher significance
               (that is, 
               representing higher powers of ten) always precede digits with lower significance,
               even when 
               the rendered text flow is from right to left.
            </p>
         </section>
         <section>
            <header>
               <h2>Examples</h2>
            </header>
            <p>The following examples assume a default decimal format in which the chosen digits
               are
               the ASCII digits 0-9, the decimal separator is ".", the grouping separator is ",",
               the minus-sign is "-", and the percent-sign is "%".
            </p>
            <p>The expression <code>format-number(12345.6, '#,###.00')</code> returns <code>"12,345.60"</code>.
            </p>
            <p>The expression <code>format-number(12345678.9, '9,999.99')</code> returns <code>"12,345,678.90"</code>.
            </p>
            <p>The expression <code>format-number(123.9, '9999')</code> returns <code>"0124"</code>.
            </p>
            <p>The expression <code>format-number(0.14, '01%')</code> returns <code>"14%"</code>.
            </p>
            <p>The expression <code>format-number(-6, '000')</code> returns <code>"-006"</code>.
            </p>
            <p>The following example assumes the existence of a decimal format named 'ch' in which
               the grouping separator is <code>ʹ</code> and the decimal separator is
               <code>·</code>:
            </p>
            <p>The expression <code>format-number(1234.5678, '#ʹ##0·00',
                  'ch')</code> returns <code>"1ʹ234·57"</code>.
            </p>
            <p>The following examples assume that the exponent separator is
               in decimal format 'fortran' is 'E':
            </p>
            <p>The expression <code>format-number(1234.5678, '00.000E0', 'fortran')</code> returns <code>"12.346E2"</code>.
            </p>
            <p>The expression <code>format-number(0.234, '0.0E0', 'fortran')</code> returns <code>"2.3E-1"</code>.
            </p>
            <p>The expression <code>format-number(0.234, '#.00E0', 'fortran')</code> returns <code>"0.23E0"</code>.
            </p>
            <p>The expression <code>format-number(0.234, '.00E0', 'fortran')</code> returns <code>".23E0"</code>.
            </p>
         </section>
         <footer>
            <h2>See Also</h2>
            <ul>
               <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number">XPath 3.1 Functions and Operators</a></li>
               <li><a href="http://www.w3.org/TR/xpath-functions-30/#func-format-number">XPath 3.0 Functions and Operators</a></li>
               <li><a href="http://www.saxonica.com/html/documentation/functions/fn/format-number.html">Saxon Function Library</a></li>
            </ul>
         </footer>
      </article>
      <footer>
         <div class="container"><small class="copyright">Portions of this document were copied from <a href="https://www.w3.org/TR/2017/REC-xpath-functions-31-20170321/xpath-functions-31.xml">this file</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2017&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div>
      </footer>
   </body>
</html>